<UserControl x:Class="RandevuYonetimSistemi.Views.Components.AppointmentDetailComponent"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:RandevuYonetimSistemi.Views.Components">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
        <local:InverseBoolToVis x:Key="InverseBoolToVis"/>
    </UserControl.Resources>


    <Border Background="White"
            CornerRadius="12"
            Padding="20">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <ScrollViewer Grid.Row="0"
                          VerticalScrollBarVisibility="Auto">

                <StackPanel>

                    <TextBlock Text="Appointment Details"
                               FontSize="22"
                               FontWeight="Bold"/>

                    <Separator Margin="0,12"/>

                    <TextBlock Text="Customer" FontWeight="Bold"/>
                    <TextBlock Text="{Binding Appointment.Customer.FullName}"
                               FontSize="15"/>
                    <TextBlock Text="{Binding Appointment.Customer.PhoneNum}"
                               FontSize="13"
                               Foreground="Gray"/>

                    <Separator Margin="0,12"/>

                    <TextBlock Text="Service" FontWeight="Bold"/>

                    <TextBlock Text="{Binding Appointment.Service}"
                               Visibility="{Binding IsEditMode, Converter={StaticResource InverseBoolToVis}}"/>

                    <TextBox Text="{Binding Appointment.Service}"
                             Height="32"
                             Visibility="{Binding IsEditMode, Converter={StaticResource BoolToVis}}"/>

                    <TextBlock Text="Date"
                               FontWeight="Bold"
                               Margin="0,12,0,0"/>

                    <TextBlock Text="{Binding Appointment.AppointmentDate, StringFormat=dd.MM.yyyy HH:mm}"
                               Visibility="{Binding IsEditMode, Converter={StaticResource InverseBoolToVis}}"/>

                    <StackPanel Orientation="Horizontal"
                                Margin="0,5,0,0"
                                Visibility="{Binding IsEditMode, Converter={StaticResource BoolToVis}}">

                        <DatePicker Width="160"
                                    SelectedDate="{Binding SelectedDate}"/>

                        <ComboBox Width="100"
                                  Margin="10,0,0,0"
                                  ItemsSource="{Binding Hours}"
                                  SelectedItem="{Binding SelectedHour}"/>
                    </StackPanel>

                    <TextBlock Text="Notes"
                               FontWeight="Bold"
                               Margin="0,12,0,0"/>

                    <TextBlock Text="{Binding Appointment.Notes}"
                               TextWrapping="Wrap"
                               Visibility="{Binding IsEditMode, Converter={StaticResource InverseBoolToVis}}"/>

                    <TextBox Text="{Binding Appointment.Notes}"
                             Height="80"
                             AcceptsReturn="True"
                             Visibility="{Binding IsEditMode, Converter={StaticResource BoolToVis}}"/>

                    <TextBlock Text="Status"
                               FontWeight="Bold"
                               Margin="0,12,0,0"/>

                    <TextBlock Text="{Binding Appointment.Status}"
                               Visibility="{Binding IsEditMode, Converter={StaticResource InverseBoolToVis}}"/>

                    <ComboBox SelectedValue="{Binding Appointment.Status}"
                              SelectedValuePath="Content"
                              Height="32"
                              Visibility="{Binding IsEditMode, Converter={StaticResource BoolToVis}}">
                        <ComboBoxItem Content="Pending"/>
                        <ComboBoxItem Content="Confirmed"/>
                        <ComboBoxItem Content="Cancelled"/>
                    </ComboBox>

                </StackPanel>
            </ScrollViewer>

            <Border Grid.Row="1"
                    BorderBrush="#E0E0E0"
                    BorderThickness="0,1,0,0"
                    Padding="10">

                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right">

                    <Button Content="Delete"
                            Width="90"
                            Margin="5"
                            Background="#D9534F"
                            Foreground="White"
                            Command="{Binding DeleteCommand}"/>

                    <Button Content="Edit"
                            Width="90"
                            Margin="5"
                            Command="{Binding EditCommand}"
                            Visibility="{Binding IsEditMode, Converter={StaticResource InverseBoolToVis}}"/>

                    <Button Content="Save"
                            Width="90"
                            Margin="5"
                            Command="{Binding SaveCommand}"
                            Visibility="{Binding IsEditMode, Converter={StaticResource BoolToVis}}"/>

                    <Button Content="Cancel"
                            Width="90"
                            Margin="5"
                            Command="{Binding CancelCommand}"
                            Visibility="{Binding IsEditMode, Converter={StaticResource BoolToVis}}"/>
                </StackPanel>
            </Border>

        </Grid>
    </Border>
</UserControl>
